# =============================================================================
# Nomad Cafe Backend - Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values.
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Core Django Settings
# -----------------------------------------------------------------------------
# Environment: development, staging, production
DJANGO_ENV=development

# Debug mode (auto-disabled in production)
DJANGO_DEBUG=1

# Secret key (generate with: python -c "import secrets; print(secrets.token_urlsafe(50))")
# REQUIRED in production - must be 50+ random characters
DJANGO_SECRET_KEY=

# Allowed hosts (comma-separated, required in production)
# Example: api.nomadcafes.com,nomadcafes.com
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# PostgreSQL recommended for production
# Format: postgres://USER:PASSWORD@HOST:PORT/DATABASE
# Leave empty for SQLite in development
DATABASE_URL=

# -----------------------------------------------------------------------------
# Redis (Cache & Background Jobs)
# -----------------------------------------------------------------------------
# Format: redis://HOST:PORT/DB
# Leave empty to use local memory cache in development
REDIS_URL=

# Cache key prefix (useful for shared Redis instances)
CACHE_KEY_PREFIX=nomadcafe

# -----------------------------------------------------------------------------
# CORS & CSRF
# -----------------------------------------------------------------------------
# Frontend URLs (comma-separated)
# Development: http://localhost:5173
# Production: https://nomadcafes.com,https://www.nomadcafes.com
CORS_ALLOWED_ORIGINS=http://localhost:5173
CSRF_TRUSTED_ORIGINS=http://localhost:5173

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
# Access token lifetime in minutes (default: 30)
JWT_ACCESS_MINUTES=30

# Refresh token lifetime in days (default: 7)
JWT_REFRESH_DAYS=7

# Rotate refresh tokens on use (recommended: 1)
JWT_ROTATE_REFRESH=1

# Blacklist rotated tokens (recommended: 1)
JWT_BLACKLIST=1

# Cookie domain for subdomains (e.g., .nomadcafes.com)
# Leave empty for current domain only
JWT_COOKIE_DOMAIN=

# Cookie SameSite attribute: Strict, Lax, or None
# Lax (default): Good balance of security and UX
# Strict: Maximum security but users appear logged out from external links
# None: Required for cross-site cookies (also requires Secure flag)
JWT_COOKIE_SAMESITE=Lax

# -----------------------------------------------------------------------------
# Email Configuration
# -----------------------------------------------------------------------------
# The application supports two email delivery methods:
#
# 1. RESEND API (Recommended for production)
#    - Simple setup, good deliverability
#    - Just set RESEND_API_KEY below
#    - Sign up at https://resend.com
#
# 2. SMTP (Alternative for production)
#    - Use with SendGrid, AWS SES, Mailgun, or any SMTP provider
#    - Set EMAIL_BACKEND to smtp and configure SMTP settings below
#
# In development, emails are printed to console by default.
# -----------------------------------------------------------------------------

# Email backend selection:
#   - Development: django.core.mail.backends.console.EmailBackend (default)
#   - Production with Resend: Leave as console, just set RESEND_API_KEY
#   - Production with SMTP: django.core.mail.backends.smtp.EmailBackend
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend

# -----------------------------------------------------------------------------
# Option 1: Resend API (Recommended)
# -----------------------------------------------------------------------------
# TODO: Get your API key from https://resend.com/api-keys
# Setup steps:
#   1. Create account at resend.com
#   2. Add and verify your sending domain (Settings -> Domains)
#   3. Create an API key (Settings -> API Keys)
#   4. Paste the API key below (starts with "re_")
#
# When RESEND_API_KEY is set, it takes priority over SMTP settings.
RESEND_API_KEY=

# -----------------------------------------------------------------------------
# Option 2: SMTP Configuration (Alternative)
# -----------------------------------------------------------------------------
# Use these settings if using SendGrid SMTP, AWS SES, Mailgun, etc.
# Only used if RESEND_API_KEY is empty AND EMAIL_BACKEND is smtp.
#
# SendGrid SMTP example:
#   EMAIL_HOST=smtp.sendgrid.net
#   EMAIL_PORT=587
#   EMAIL_HOST_USER=apikey
#   EMAIL_HOST_PASSWORD=SG.your_sendgrid_api_key_here
#
# AWS SES SMTP example:
#   EMAIL_HOST=email-smtp.eu-central-1.amazonaws.com
#   EMAIL_PORT=587
#   EMAIL_HOST_USER=your_ses_smtp_username
#   EMAIL_HOST_PASSWORD=your_ses_smtp_password
#
# Mailgun SMTP example:
#   EMAIL_HOST=smtp.mailgun.org
#   EMAIL_PORT=587
#   EMAIL_HOST_USER=postmaster@your-domain.mailgun.org
#   EMAIL_HOST_PASSWORD=your_mailgun_smtp_password
#
EMAIL_HOST=smtp.sendgrid.net
EMAIL_PORT=587
EMAIL_USE_TLS=1
# TODO: Set SMTP credentials for production (if not using Resend)
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=

# -----------------------------------------------------------------------------
# Sender Addresses
# -----------------------------------------------------------------------------
# IMPORTANT: Update these to your actual domain in production!
# The sender domain MUST be verified with your email provider (Resend/SendGrid/etc.)
# Emails from unverified domains will be rejected or marked as spam.
DEFAULT_FROM_EMAIL=noreply@nomadcafes.dev
CONTACT_EMAIL=hello@nomadcafes.dev

# -----------------------------------------------------------------------------
# Frontend URL
# -----------------------------------------------------------------------------
# Used for email links (password reset, verification)
FRONTEND_URL=http://localhost:5173

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Format: requests/period (e.g., 100/hour, 10/minute)
# Anonymous users
THROTTLE_ANON=100/hour
# Authenticated users
THROTTLE_USER=1000/hour
# Auth endpoints (login/register)
THROTTLE_AUTH=10/minute
# Token refresh requests
THROTTLE_TOKEN_REFRESH=30/minute
# Password reset requests
THROTTLE_PASSWORD_RESET=3/hour
# Email verification resend
THROTTLE_EMAIL_VERIFICATION=5/hour
# Contact form submissions
THROTTLE_CONTACT=5/hour
# Review creation (per user)
THROTTLE_REVIEW_CREATE=10/hour
# Favorite creation (per user)
THROTTLE_FAVORITE_CREATE=50/hour

# -----------------------------------------------------------------------------
# API Settings
# -----------------------------------------------------------------------------
# Results per page
API_PAGE_SIZE=20

# Application version (shown in /api/health/)
APP_VERSION=1.0.0

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
DJANGO_LOG_LEVEL=INFO

# Log format: simple (human-readable) or json (for log aggregators)
DJANGO_LOG_FORMAT=simple

# -----------------------------------------------------------------------------
# Sentry (Error Tracking)
# -----------------------------------------------------------------------------
# Get your DSN from https://sentry.io
# Leave empty to disable Sentry
SENTRY_DSN=

# Sentry environment (auto-detected from DJANGO_ENV if not set)
SENTRY_ENVIRONMENT=

# Performance monitoring sample rate (0.0 to 1.0)
# 0.1 = 10% of transactions
SENTRY_TRACES_SAMPLE_RATE=0.1

# -----------------------------------------------------------------------------
# Localization
# -----------------------------------------------------------------------------
LANGUAGE_CODE=en-us
TIME_ZONE=Europe/Berlin

# -----------------------------------------------------------------------------
# Security (Production)
# -----------------------------------------------------------------------------
# Enable SSL redirect (set to 1 in production behind HTTPS)
SECURE_SSL_REDIRECT=0

# Trust X-Forwarded-Proto header (for reverse proxy)
USE_X_FORWARDED_PROTO=0

# HSTS settings (production only)
SECURE_HSTS_SECONDS=3600
SECURE_HSTS_INCLUDE_SUBDOMAINS=1
SECURE_HSTS_PRELOAD=1

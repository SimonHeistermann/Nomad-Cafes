# =============================================================================
# Nomad Cafes - Root Environment Configuration
# =============================================================================
# This file documents ALL environment variables used across the monorepo.
# For deployment, copy relevant sections to:
#   - backend/.env      (Backend variables)
#   - frontend/.env     (Frontend variables)
#
# Detailed templates are available in each subdirectory:
#   - backend/.env.template   (Full backend reference with comments)
#   - frontend/.env.template  (Full frontend reference with comments)
#
# NEVER commit .env files to version control!
# =============================================================================

# =============================================================================
# DOCKER COMPOSE (Root Level)
# =============================================================================
# Used by docker-compose.yml in root for containerized deployment

# PostgreSQL Database
POSTGRES_PASSWORD=change-me-to-a-secure-password
POSTGRES_USER=nomadcafe
POSTGRES_DB=nomadcafe

# =============================================================================
# BACKEND (Django)
# =============================================================================
# Copy to backend/.env

# Core Settings
DJANGO_ENV=production                    # development, staging, production
DJANGO_DEBUG=0                           # 0=False, 1=True
DJANGO_SECRET_KEY=                       # Generate: python -c "import secrets; print(secrets.token_urlsafe(50))"
DJANGO_ALLOWED_HOSTS=localhost,your-domain.com

# Database
DATABASE_URL=postgres://nomadcafe:password@localhost:5432/nomadcafe

# Redis (Cache & Background Jobs)
REDIS_URL=redis://localhost:6379/0

# CORS & CSRF (comma-separated, no trailing slashes)
CORS_ALLOWED_ORIGINS=https://your-domain.com
CSRF_TRUSTED_ORIGINS=https://your-domain.com

# Frontend URL (for email links)
FRONTEND_URL=https://your-domain.com

# JWT Authentication
JWT_ACCESS_MINUTES=30
JWT_REFRESH_DAYS=7
JWT_COOKIE_SAMESITE=Lax

# Email - Option 1: Resend (Recommended)
RESEND_API_KEY=                          # Get from https://resend.com

# Email - Option 2: SMTP (Alternative)
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.sendgrid.net
EMAIL_PORT=587
EMAIL_USE_TLS=1
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=

# Email Sender
DEFAULT_FROM_EMAIL=noreply@your-domain.com
CONTACT_EMAIL=hello@your-domain.com

# Rate Limiting (format: count/period)
THROTTLE_ANON=100/hour
THROTTLE_USER=1000/hour
THROTTLE_AUTH=10/minute

# Logging
DJANGO_LOG_LEVEL=INFO                    # DEBUG, INFO, WARNING, ERROR
DJANGO_LOG_FORMAT=json                   # simple or json

# Sentry (Error Tracking)
SENTRY_DSN=                              # Get from https://sentry.io
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# FRONTEND (Vite/React)
# =============================================================================
# Copy to frontend/.env
# All frontend vars must start with VITE_

# API Configuration
VITE_API_BASE_URL=/api                   # Relative for same-domain, or https://api.domain.com
VITE_API_TIMEOUT=10000
VITE_API_CACHE_TTL_MS=5000

# Environment
VITE_ENV=production

# App Version (for Sentry releases)
VITE_APP_VERSION=1.0.0

# Sentry (Error Tracking)
VITE_SENTRY_DSN=                         # Get from https://sentry.io (React project)
VITE_SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# QUICK START GUIDE
# =============================================================================
#
# 1. DEVELOPMENT (Local)
#    ─────────────────────
#    Backend:
#      cd backend
#      cp .env.template .env
#      # Edit .env, set:
#      #   DJANGO_ENV=development
#      #   DJANGO_DEBUG=1
#      #   Leave DATABASE_URL empty (uses SQLite)
#      #   Leave REDIS_URL empty (uses memory cache)
#      python manage.py runserver
#
#    Frontend:
#      cd frontend
#      cp .env.template .env
#      # Edit .env, set:
#      #   VITE_API_BASE_URL=http://localhost:8000/api
#      npm run dev
#
# 2. PRODUCTION (DigitalOcean App Platform)
#    ─────────────────────────────────────────
#    See docs/DEPLOYMENT_DIGITALOCEAN.md for complete guide.
#
#    Required services:
#    - PostgreSQL (managed database)
#    - Redis (managed database)
#    - Resend account (email delivery)
#    - Sentry account (error tracking, optional)
#
# 3. DOCKER COMPOSE
#    ─────────────────
#    cp .env.example .env
#    # Edit .env with production values
#    docker-compose -f docker-compose.prod.yml up -d
#
# =============================================================================
